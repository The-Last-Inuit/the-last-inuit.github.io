<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="Software engineering à la Mexicana">

  <title>Layoffs</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://idunnowhatiamdoing.engineering/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://idunnowhatiamdoing.engineering/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://idunnowhatiamdoing.engineering/img/apple-touch-icon.png">
  
  <style>
  @import url("https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap");

  /* light mode colors */
  body {
    --primary-color: #5871a2;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #ffffff;
    --text-color: #2f3030;
    --text-pale-color: #767676;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    --primary-color: #6f8fd1;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    --bg-color: #1c1c1c;
    --text-color: #c1c1c1;
    --text-pale-color: #848484;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    --main-font: "Share Tech Mono", monospace;
    --code-font: "Share Tech Mono", monospace;
    --homepage-max-width: 768px;
    --main-max-width: 768px;
    --avatar-size: 60px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 0px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }
</style>

  <link rel="stylesheet" href="https://idunnowhatiamdoing.engineering/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  
<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#go-vs-elixir">Go vs Elixir</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#tl-dr">TL;DR</a>
            </li>
            
            <li>
              <a class="h3" href="#core-mental-model">Core mental model</a>
            </li>
            
            <li>
              <a class="h3" href="#side-by-side-mapping">Side-by-side mapping</a>
            </li>
            
            <li>
              <a class="h3" href="#1-fire-and-forget-background-work">1) “Fire-and-forget” background work</a>
            </li>
            
            <li>
              <a class="h3" href="#2-run-a-task-and-await-result-with-timeout">2) Run a task and await result (with timeout)</a>
            </li>
            
            <li>
              <a class="h3" href="#3-fan-out-fan-in-with-cancellation-error-propagation">3) Fan-out&#x2F;fan-in with cancellation + error propagation</a>
            </li>
            
            <li>
              <a class="h3" href="#cancellation-and-timeouts">Cancellation and timeouts</a>
            </li>
            
            <li>
              <a class="h3" href="#error-handling-and-what-happens-if-it-crashes">Error handling and what happens if it crashes?</a>
            </li>
            
            <li>
              <a class="h3" href="#backpressure-and-throughput-control">Backpressure and throughput control</a>
            </li>
            
            <li>
              <a class="h3" href="#cpu-bound-vs-i-o-bound-work">CPU-bound vs I&#x2F;O-bound work</a>
            </li>
            
            <li>
              <a class="h3" href="#observability-and-debugging">Observability and debugging</a>
            </li>
            
            <li>
              <a class="h3" href="#when-one-is-a-better-fit">When one is a better fit</a>
            </li>
            
            <li>
              <a class="h3" href="#practical-guidance-translating-patterns">Practical guidance: translating patterns</a>
            </li>
            
            <li>
              <a class="h3" href="#common-footguns">Common footguns</a>
            </li>
            
            <li>
              <a class="h3" href="#mini-cheat-sheet-what-s-the-equivalent-of">Mini cheat-sheet: what&#x27;s the equivalent of...?</a>
            </li>
            
          </ul>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    
<header>
  <nav>
    <a id="back-link" href="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts">← back</a>
  </nav>
</header>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
"></div>
      
      <article class="prose">
        <h1>Layoffs</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Dec 19, 2025</span>
            </div>

          
        </div>

        
        

        

        <p>Today I have an interview. I was expecting to look for a job in a few years, but sadly, layoffs started happening at my current company. There have been two waves already. It was supposed to be over, but it got me thinking: maybe it's time to move on. So I started interviewing. The current climate isn't great, but well... I have to.</p>
<p>Today's interview was for a company that uses Go. I played with Go a long time ago, and nothing since then. Still, it's just a language. One of the nice things about getting older (and hopefully wiser) is realizing that languages are just tools. As long as you understand algorithms, design approaches, and so on, the language isn't a barrier or at least, that's what I believe.</p>
<p>Anyway, I picked up Go again to prepare for the next interview, which will happen next year. It's kind of weird, since it'll be an interview with seven software engineers. I don't feel pressure, but... it's weird.</p>
<p>Anyhow, I really love how Elixir handles asynchronous tasks. Revisiting Go reminded me why I find it a bit off-putting.</p>
<p>Here's what I've learned.</p>
<h4 id="go-vs-elixir">Go vs Elixir<a class="zola-anchor" href="#go-vs-elixir" aria-label="Anchor link for: go-vs-elixir" style="visibility: hidden;"></a>
</h4>
<p>This is a practical comparison of how <strong>Go</strong> and <strong>Elixir (BEAM/OTP)</strong> approach doing many things at once: concurrent I/O, background jobs, fan-out/fan-in pipelines, and fault-tolerant workers.</p>
<blockquote>
<p>Terminology note: both ecosystems often say <strong>concurrency</strong> rather than asynchronous. In practice, async tasks usually means run work concurrently without blocking the caller.</p>
</blockquote>
<h5 id="tl-dr">TL;DR<a class="zola-anchor" href="#tl-dr" aria-label="Anchor link for: tl-dr" style="visibility: hidden;"></a>
</h5>
<ul>
<li><strong>Go</strong>: you build concurrency explicitly with <strong>goroutines + channels</strong> (and <code>context</code> for cancellation). You also build your own supervision patterns (restart, isolation, backoff) or use libraries.</li>
<li><strong>Elixir</strong>: the runtime is built around <strong>isolated lightweight processes + message passing + OTP supervision</strong>. Starting concurrent work is easy, and <em>restarts/fault-handling are first-class</em>.</li>
</ul>
<p>Both can be excellent, they just optimize for different defaults.</p>
<h5 id="core-mental-model">Core mental model<a class="zola-anchor" href="#core-mental-model" aria-label="Anchor link for: core-mental-model" style="visibility: hidden;"></a>
</h5>
<h6 id="go">Go<a class="zola-anchor" href="#go" aria-label="Anchor link for: go" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Concurrency primitive: <strong>goroutine</strong> (cheap thread-like unit).</li>
<li>Communication: <strong>channels</strong> (typed queues) or shared memory with locks.</li>
<li>Failure model: panics exist, but <strong>errors are usually returned</strong>, goroutine crashes don't automatically restart.</li>
<li>You typically implement:
<ul>
<li>cancellation via <code>context.Context</code></li>
<li>structured concurrency via <code>errgroup</code></li>
<li>restart/backoff via your own loops or orchestration (systemd/K8s)</li>
</ul>
</li>
</ul>
<h6 id="elixir-beam-otp">Elixir (BEAM/OTP)<a class="zola-anchor" href="#elixir-beam-otp" aria-label="Anchor link for: elixir-beam-otp" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Concurrency primitive: <strong>process</strong> (even cheaper, isolated, preemptively scheduled).</li>
<li>Communication: <strong>message passing</strong> (<code>send/2</code>, <code>receive</code>), mailboxes.</li>
<li>Failure model: “<strong>let it crash</strong>” + supervisors restart children.</li>
<li>Structured concurrency &amp; lifecycle are built into OTP:
<ul>
<li><code>Supervisor</code>, <code>Task.Supervisor</code>, <code>GenServer</code>, <code>GenStage</code>, <code>Broadway</code></li>
</ul>
</li>
</ul>
<h5 id="side-by-side-mapping">Side-by-side mapping<a class="zola-anchor" href="#side-by-side-mapping" aria-label="Anchor link for: side-by-side-mapping" style="visibility: hidden;"></a>
</h5>
<table><thead><tr><th>Goal</th><th>Go</th><th>Elixir</th></tr></thead><tbody>
<tr><td>Start a concurrent task</td><td><code>go fn()</code></td><td><code>Task.async(fn -&gt; ... end)</code> / <code>Task.start_link</code></td></tr>
<tr><td>Wait for result</td><td>channel receive / <code>WaitGroup</code></td><td><code>Task.await(task, timeout)</code></td></tr>
<tr><td>Run N tasks, collect results</td><td>fan-out channels / <code>errgroup.Group</code></td><td><code>Task.async_stream/3</code></td></tr>
<tr><td>Cancel work</td><td><code>context.WithCancel/Timeout</code></td><td><code>Task.shutdown/2</code>, process exit signals, timeouts, <code>receive ... after</code></td></tr>
<tr><td>Backpressure</td><td>bounded channels, semaphores</td><td><code>Task.async_stream(max_concurrency:)</code>, GenStage/Broadway</td></tr>
<tr><td>Supervise &amp; restart</td><td>DIY + systemd/K8s / libraries</td><td>OTP <code>Supervisor</code> strategies, retries, backoff</td></tr>
<tr><td>Queue jobs</td><td>external (Redis/SQS/etc) + worker pool</td><td>Oban/Que/Exq + supervised workers</td></tr>
<tr><td>Distributed concurrency</td><td>explicit RPC, gRPC, etc.</td><td>built-in distribution (<code>Node</code>, <code>GenServer.call</code> across nodes)</td></tr>
</tbody></table>
<h5 id="1-fire-and-forget-background-work">1) “Fire-and-forget” background work<a class="zola-anchor" href="#1-fire-and-forget-background-work" aria-label="Anchor link for: 1-fire-and-forget-background-work" style="visibility: hidden;"></a>
</h5>
<h6 id="go-1">Go<a class="zola-anchor" href="#go-1" aria-label="Anchor link for: go-1" style="visibility: hidden;"></a>
</h6>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-keyword z-control z-go">go</span> <span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> do work
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></code></pre>
<p>Concerns:</p>
<ul>
<li>where do you log errors?</li>
<li>how do you stop it on shutdown?</li>
<li>who restarts it if it dies?</li>
</ul>
<h6 id="elixir">Elixir<a class="zola-anchor" href="#elixir" aria-label="Anchor link for: elixir" style="visibility: hidden;"></a>
</h6>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir"><span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>start<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-keyword z-control z-elixir">fn</span> <span class="z-keyword z-operator z-other z-elixir">-&gt;</span>
</span><span class="z-source z-elixir"><span class="z-comment z-line z-number-sign z-elixir">  <span class="z-punctuation z-definition z-comment z-elixir">#</span> do work
</span></span><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">end</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre>
<p>If you want it tied to a supervision tree:</p>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir"><span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span><span class="z-entity z-name z-class z-elixir">Supervisor</span><span class="z-punctuation z-separator z-method z-elixir">.</span>start_child<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-entity z-name z-class z-elixir">MyTaskSup</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-keyword z-control z-elixir">fn</span> <span class="z-keyword z-operator z-other z-elixir">-&gt;</span>
</span><span class="z-source z-elixir"><span class="z-comment z-line z-number-sign z-elixir">  <span class="z-punctuation z-definition z-comment z-elixir">#</span> do work
</span></span><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">end</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre>
<h5 id="2-run-a-task-and-await-result-with-timeout">2) Run a task and await result (with timeout)<a class="zola-anchor" href="#2-run-a-task-and-await-result-with-timeout" aria-label="Anchor link for: 2-run-a-task-and-await-result-with-timeout" style="visibility: hidden;"></a>
</h5>
<h6 id="go-channel-timeout">Go (channel + timeout)<a class="zola-anchor" href="#go-channel-timeout" aria-label="Anchor link for: go-channel-timeout" style="visibility: hidden;"></a>
</h6>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-variable z-declaration z-go">resultCh</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">make</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-chan z-go">chan</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">int</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-numeric z-integer z-decimal z-go">1</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-keyword z-control z-go">go</span> <span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">resultCh</span> <span class="z-keyword z-operator z-go">&lt;-</span> <span class="z-variable z-function z-go">slowComputation</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-keyword z-control z-go">select</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-keyword z-control z-go">case</span> <span class="z-variable z-declaration z-go">v</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-keyword z-operator z-go">&lt;-</span><span class="z-variable z-other z-go">resultCh</span><span class="z-punctuation z-separator z-go">:</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-language z-blank z-go">_</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-other z-go">v</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">&lt;-</span><span class="z-variable z-other z-go">time</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">After</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-constant z-numeric z-integer z-decimal z-go">2</span> <span class="z-keyword z-operator z-go">*</span> <span class="z-variable z-other z-go">time</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Second</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">:</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> timeout
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<h6 id="elixir-1">Elixir<a class="zola-anchor" href="#elixir-1" aria-label="Anchor link for: elixir-1" style="visibility: hidden;"></a>
</h6>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir">task <span class="z-keyword z-operator z-assignment z-elixir">=</span> <span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>async<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-keyword z-control z-elixir">fn</span> <span class="z-keyword z-operator z-other z-elixir">-&gt;</span> slow_computation<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-elixir">end</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">value <span class="z-keyword z-operator z-assignment z-elixir">=</span> <span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>await<span class="z-punctuation z-section z-function z-elixir">(</span>task<span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-numeric z-elixir">2_000</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre>
<h5 id="3-fan-out-fan-in-with-cancellation-error-propagation">3) Fan-out/fan-in with cancellation + error propagation<a class="zola-anchor" href="#3-fan-out-fan-in-with-cancellation-error-propagation" aria-label="Anchor link for: 3-fan-out-fan-in-with-cancellation-error-propagation" style="visibility: hidden;"></a>
</h5>
<h6 id="go-structured-concurrency-with-errgroup">Go (structured concurrency with errgroup)<a class="zola-anchor" href="#go-structured-concurrency-with-errgroup" aria-label="Anchor link for: go-structured-concurrency-with-errgroup" style="visibility: hidden;"></a>
</h6>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-variable z-declaration z-go">g</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">ctx</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">errgroup</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">WithContext</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">parentCtx</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-keyword z-control z-go">for</span> <span class="z-variable z-language z-blank z-go">_</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">item</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-keyword z-other z-go">range</span> <span class="z-variable z-other z-go">items</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-declaration z-go">item</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">item</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">g</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Go</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-keyword z-control z-go">return</span> <span class="z-variable z-function z-go">doWork</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">item</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> should respect ctx
</span></span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span><span class="z-source z-go">
</span><span class="z-source z-go"><span class="z-keyword z-control z-go">if</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">g</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Wait</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-terminator z-go">;</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> first error cancels ctx, other workers should stop
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<h6 id="elixir-task-async-stream">Elixir (<code>Task.async_stream</code>)<a class="zola-anchor" href="#elixir-task-async-stream" aria-label="Anchor link for: elixir-task-async-stream" style="visibility: hidden;"></a>
</h6>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir">items
</span><span class="z-source z-elixir"><span class="z-keyword z-operator z-pipe z-elixir">|&gt;</span> <span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>async_stream<span class="z-punctuation z-section z-function z-elixir">(</span>
</span><span class="z-source z-elixir">  <span class="z-keyword z-control z-elixir">fn</span> item <span class="z-keyword z-operator z-other z-elixir">-&gt;</span> do_work<span class="z-punctuation z-section z-function z-elixir">(</span>item<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-elixir">end</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">max_concurrency<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-entity z-name z-class z-elixir">System</span><span class="z-punctuation z-separator z-method z-elixir">.</span>schedulers_online<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-punctuation z-section z-function z-elixir">)</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">timeout<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-numeric z-elixir">5_000</span><span class="z-punctuation z-separator z-object z-elixir">,</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-other z-keywords z-elixir">on_timeout<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>kill_task</span>
</span><span class="z-source z-elixir"><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir"><span class="z-keyword z-operator z-pipe z-elixir">|&gt;</span> <span class="z-entity z-name z-class z-elixir">Enum</span><span class="z-punctuation z-separator z-method z-elixir">.</span>to_list<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre>
<p>Notes:</p>
<ul>
<li><code>async_stream</code> gives you controlled concurrency + backpressure knobs.</li>
<li>Errors come back as <code>{:exit, reason}</code> or <code>{:error, reason}</code> depending on your function.</li>
</ul>
<h5 id="cancellation-and-timeouts">Cancellation and timeouts<a class="zola-anchor" href="#cancellation-and-timeouts" aria-label="Anchor link for: cancellation-and-timeouts" style="visibility: hidden;"></a>
</h5>
<h6 id="go-context-context-is-the-contract">Go: <code>context.Context</code> is the contract<a class="zola-anchor" href="#go-context-context-is-the-contract" aria-label="Anchor link for: go-context-context-is-the-contract" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Functions accept <code>ctx context.Context</code></li>
<li>You cancel via <code>cancel()</code> or deadline expiry</li>
<li>Code must cooperatively check <code>ctx.Done()</code></li>
</ul>
<p>Example loop:</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-keyword z-control z-go">for</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">select</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">case</span> <span class="z-keyword z-operator z-go">&lt;-</span><span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Done</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-keyword z-control z-go">return</span> <span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Err</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">case</span> <span class="z-variable z-declaration z-go">msg</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-keyword z-operator z-go">&lt;-</span><span class="z-variable z-other z-go">ch</span><span class="z-punctuation z-separator z-go">:</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-variable z-function z-go">handle</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">msg</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<h6 id="elixir-processes-can-be-told-to-stop">Elixir: processes can be told to stop<a class="zola-anchor" href="#elixir-processes-can-be-told-to-stop" aria-label="Anchor link for: elixir-processes-can-be-told-to-stop" style="visibility: hidden;"></a>
</h6>
<ul>
<li>You can:
<ul>
<li>use timeouts in <code>GenServer.call/3</code> and <code>Task.await/2</code></li>
<li>send messages to instruct stop</li>
<li><strong>exit/kill</strong> processes (stronger than cooperative cancellation)</li>
<li>link/monitor to propagate shutdown</li>
</ul>
</li>
</ul>
<p>Example timeout receive:</p>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">receive</span> <span class="z-keyword z-control z-elixir">do</span>
</span><span class="z-source z-elixir">  <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>msg</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> v<span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span> <span class="z-keyword z-operator z-arrow z-elixir">-&gt;</span> v
</span><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">after</span>
</span><span class="z-source z-elixir">  <span class="z-constant z-numeric z-elixir">2_000</span> <span class="z-keyword z-operator z-arrow z-elixir">-&gt;</span> <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>error</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>timeout</span><span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span>
</span><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">end</span>
</span></code></pre>
<p>Shutdown a task:</p>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir"><span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>shutdown<span class="z-punctuation z-section z-function z-elixir">(</span>task<span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>brutal_kill</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span></code></pre>
<h5 id="error-handling-and-what-happens-if-it-crashes">Error handling and what happens if it crashes?<a class="zola-anchor" href="#error-handling-and-what-happens-if-it-crashes" aria-label="Anchor link for: error-handling-and-what-happens-if-it-crashes" style="visibility: hidden;"></a>
</h5>
<h6 id="go-2">Go<a class="zola-anchor" href="#go-2" aria-label="Anchor link for: go-2" style="visibility: hidden;"></a>
</h6>
<ul>
<li>If a goroutine returns an error, you must <strong>send it somewhere</strong> (channel, <code>errgroup</code>, etc.).</li>
<li>A panic in a goroutine can crash the whole program if not recovered.</li>
<li>Restart strategies are <strong>not automatic</strong> at the language/runtime level.</li>
</ul>
<p>Typical approach:</p>
<ul>
<li>keep workers in a loop</li>
<li>log errors</li>
<li>retry with backoff</li>
<li>rely on process supervisor (systemd/Kubernetes) to restart the service</li>
</ul>
<h6 id="elixir-2">Elixir<a class="zola-anchor" href="#elixir-2" aria-label="Anchor link for: elixir-2" style="visibility: hidden;"></a>
</h6>
<ul>
<li>If a process crashes, its supervisor can <strong>restart it automatically</strong> (with strategies like <code>:one_for_one</code>, etc.).</li>
<li>Crashes are expected, you isolate work in processes and design clean restarts.</li>
<li>This is a big reason Elixir shines for always-on systems.</li>
</ul>
<h5 id="backpressure-and-throughput-control">Backpressure and throughput control<a class="zola-anchor" href="#backpressure-and-throughput-control" aria-label="Anchor link for: backpressure-and-throughput-control" style="visibility: hidden;"></a>
</h5>
<h6 id="go-3">Go<a class="zola-anchor" href="#go-3" aria-label="Anchor link for: go-3" style="visibility: hidden;"></a>
</h6>
<p>Common tools:</p>
<ul>
<li><strong>bounded channels</strong> to limit queue size</li>
<li>worker pools + semaphore patterns</li>
<li><code>select</code> defaults to avoid blocking</li>
</ul>
<p>Example: semaphore for max concurrency</p>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-variable z-declaration z-go">sem</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-function z-go"><span class="z-support z-function z-builtin z-go">make</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-chan z-go">chan</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-numeric z-integer z-decimal z-go">20</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-comment z-line z-go"><span class="z-punctuation z-definition z-comment z-go">//</span> max 20
</span></span><span class="z-source z-go"><span class="z-keyword z-control z-go">for</span> <span class="z-variable z-language z-blank z-go">_</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">item</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-keyword z-other z-go">range</span> <span class="z-variable z-other z-go">items</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">sem</span> <span class="z-keyword z-operator z-go">&lt;-</span> <span class="z-storage z-type z-keyword z-struct z-go">struct</span><span class="z-meta z-type z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">go</span> <span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">it</span> <span class="z-storage z-type z-go">Item</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-keyword z-control z-go">defer</span> <span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span> <span class="z-keyword z-operator z-go">&lt;-</span><span class="z-variable z-other z-go">sem</span> <span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-variable z-language z-blank z-go">_</span> <span class="z-keyword z-operator z-assignment z-go">=</span> <span class="z-variable z-function z-go">do</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">it</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">item</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<h6 id="elixir-3">Elixir<a class="zola-anchor" href="#elixir-3" aria-label="Anchor link for: elixir-3" style="visibility: hidden;"></a>
</h6>
<p>Common tools:</p>
<ul>
<li><code>Task.async_stream(max_concurrency:)</code></li>
<li>GenStage/Broadway pipelines (explicit demand-driven flow)</li>
<li>OTP mailboxes (be careful: unbounded mailbox can become a memory pressure point)</li>
</ul>
<h5 id="cpu-bound-vs-i-o-bound-work">CPU-bound vs I/O-bound work<a class="zola-anchor" href="#cpu-bound-vs-i-o-bound-work" aria-label="Anchor link for: cpu-bound-vs-i-o-bound-work" style="visibility: hidden;"></a>
</h5>
<h6 id="go-4">Go<a class="zola-anchor" href="#go-4" aria-label="Anchor link for: go-4" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Great for I/O concurrency.</li>
<li>CPU-bound work scales with GOMAXPROCS; goroutines run on OS threads managed by the scheduler.</li>
</ul>
<h6 id="elixir-4">Elixir<a class="zola-anchor" href="#elixir-4" aria-label="Anchor link for: elixir-4" style="visibility: hidden;"></a>
</h6>
<ul>
<li>BEAM is excellent for I/O and many concurrent processes.</li>
<li>CPU-heavy workloads can still work well, but:
<ul>
<li>long CPU loops can hurt scheduler responsiveness</li>
<li>you often move heavy numeric work to <strong>NIFs</strong> (Rust/C) or ports if needed</li>
</ul>
</li>
</ul>
<h5 id="observability-and-debugging">Observability and debugging<a class="zola-anchor" href="#observability-and-debugging" aria-label="Anchor link for: observability-and-debugging" style="visibility: hidden;"></a>
</h5>
<h6 id="go-5">Go<a class="zola-anchor" href="#go-5" aria-label="Anchor link for: go-5" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Standard: <code>pprof</code>, tracing, metrics, logs.</li>
<li>Concurrency bugs often involve:
<ul>
<li>goroutine leaks</li>
<li>deadlocks</li>
<li>races (use <code>-race</code>)</li>
</ul>
</li>
</ul>
<h6 id="elixir-5">Elixir<a class="zola-anchor" href="#elixir-5" aria-label="Anchor link for: elixir-5" style="visibility: hidden;"></a>
</h6>
<ul>
<li>The runtime provides introspection tools:
<ul>
<li>process listings, mailbox sizes, reductions, traces</li>
</ul>
</li>
<li>Concurrency bugs often involve:
<ul>
<li>mailbox growth</li>
<li>message ordering assumptions</li>
<li>supervision misconfiguration</li>
</ul>
</li>
</ul>
<h5 id="when-one-is-a-better-fit">When one is a better fit<a class="zola-anchor" href="#when-one-is-a-better-fit" aria-label="Anchor link for: when-one-is-a-better-fit" style="visibility: hidden;"></a>
</h5>
<h6 id="pick-go-when">Pick Go when...<a class="zola-anchor" href="#pick-go-when" aria-label="Anchor link for: pick-go-when" style="visibility: hidden;"></a>
</h6>
<ul>
<li>you want a small static binary, simple deployment footprint</li>
<li>you're building system/network services with explicit concurrency control</li>
<li>you're in an ecosystem heavily invested in gRPC/K8s and Go tooling</li>
<li>you want close-to-the-metal performance with relatively simple concurrency primitives</li>
</ul>
<h6 id="pick-elixir-when">Pick Elixir when...<a class="zola-anchor" href="#pick-elixir-when" aria-label="Anchor link for: pick-elixir-when" style="visibility: hidden;"></a>
</h6>
<ul>
<li>you need <strong>fault tolerance</strong> as a default (telecom-style always up)</li>
<li>you want thousands/millions of concurrent lightweight processes</li>
<li>you benefit from OTP patterns: supervision, hot code upgrades (rare), distributed messaging</li>
<li>you want restartable components inside the app, not just at the container level</li>
</ul>
<h5 id="practical-guidance-translating-patterns">Practical guidance: translating patterns<a class="zola-anchor" href="#practical-guidance-translating-patterns" aria-label="Anchor link for: practical-guidance-translating-patterns" style="visibility: hidden;"></a>
</h5>
<h6 id="i-have-background-jobs">I have background jobs<a class="zola-anchor" href="#i-have-background-jobs" aria-label="Anchor link for: i-have-background-jobs" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Go: worker pool + queue (Redis/SQS/etc) + process-level restart by K8s/systemd</li>
<li>Elixir: Oban/Que + supervised workers + retries/backoff built-in</li>
</ul>
<h6 id="i-need-a-pipeline-with-backpressure">I need a pipeline with backpressure<a class="zola-anchor" href="#i-need-a-pipeline-with-backpressure" aria-label="Anchor link for: i-need-a-pipeline-with-backpressure" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Go: bounded channels + workers + careful select logic</li>
<li>Elixir: GenStage/Broadway (demand-driven) or <code>async_stream</code> for simpler cases</li>
</ul>
<h6 id="i-need-request-scoped-cancellation">I need request-scoped cancellation<a class="zola-anchor" href="#i-need-request-scoped-cancellation" aria-label="Anchor link for: i-need-request-scoped-cancellation" style="visibility: hidden;"></a>
</h6>
<ul>
<li>Go: <code>context</code> everywhere</li>
<li>Elixir: timeouts and process links/monitors; pass deadlines explicitly as data</li>
</ul>
<h5 id="common-footguns">Common footguns<a class="zola-anchor" href="#common-footguns" aria-label="Anchor link for: common-footguns" style="visibility: hidden;"></a>
</h5>
<h6 id="go-6">Go<a class="zola-anchor" href="#go-6" aria-label="Anchor link for: go-6" style="visibility: hidden;"></a>
</h6>
<ul>
<li>goroutine leaks (started, never stopped)</li>
<li>forgetting to respect <code>ctx.Done()</code></li>
<li>data races from shared memory (use <code>-race</code>)</li>
<li>unbuffered channels causing deadlocks in production</li>
</ul>
<h6 id="elixir-6">Elixir<a class="zola-anchor" href="#elixir-6" aria-label="Anchor link for: elixir-6" style="visibility: hidden;"></a>
</h6>
<ul>
<li>mailbox growth (slow consumer, too many messages)</li>
<li>blocking the scheduler with long CPU loops</li>
<li>misusing <code>Task.await</code> (awaiting from process that must remain responsive)</li>
<li>everything is a GenServer (over-serialization)</li>
</ul>
<h5 id="mini-cheat-sheet-what-s-the-equivalent-of">Mini cheat-sheet: what's the equivalent of...?<a class="zola-anchor" href="#mini-cheat-sheet-what-s-the-equivalent-of" aria-label="Anchor link for: mini-cheat-sheet-what-s-the-equivalent-of" style="visibility: hidden;"></a>
</h5>
<ul>
<li><strong>goroutine</strong> → Elixir <strong>process</strong> (<code>spawn</code>, <code>Task</code>, GenServer)</li>
<li><strong>channel</strong> → Elixir <strong>mailbox</strong> (message passing); for queues use <code>:queue</code>, GenStage, or external queues</li>
<li><strong>WaitGroup</strong> → <code>Task.yield_many</code> / <code>Task.async_stream</code> / supervised child tracking</li>
<li><strong>select</strong> → <code>receive</code> with pattern matching + <code>after</code></li>
<li><strong>context cancellation</strong> → shutdown signals, timeouts, explicit stop messages, <code>Task.shutdown</code></li>
</ul>
<h6 id="go-request-handler-that-fans-out-with-cancellation">Go: request handler that fans out with cancellation<a class="zola-anchor" href="#go-request-handler-that-fans-out-with-cancellation" aria-label="Anchor link for: go-request-handler-that-fans-out-with-cancellation" style="visibility: hidden;"></a>
</h6>
<pre data-lang="go" class="language-go z-code"><code class="language-go" data-lang="go"><span class="z-source z-go"><span class="z-storage z-type z-keyword z-function z-go">func</span> <span class="z-entity z-name z-function z-go">Handler</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-parameter z-go">w</span> <span class="z-variable z-other z-go">http</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">ResponseWriter</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-parameter z-go">r</span> <span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">http</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-storage z-type z-go">Request</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-declaration z-go">ctx</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">cancel</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">context</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">WithTimeout</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">r</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Context</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-numeric z-integer z-decimal z-go">2</span><span class="z-keyword z-operator z-go">*</span><span class="z-variable z-other z-go">time</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-other z-member z-go">Second</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">defer</span> <span class="z-variable z-function z-go">cancel</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-declaration z-go">g</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-declaration z-go">ctx</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">errgroup</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">WithContext</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">g</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Go</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span> <span class="z-keyword z-control z-go">return</span> <span class="z-variable z-function z-go">callA</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">g</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Go</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-storage z-type z-keyword z-function z-go">func</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-storage z-type z-go"><span class="z-support z-type z-builtin z-go">error</span></span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span> <span class="z-keyword z-control z-go">return</span> <span class="z-variable z-function z-go">callB</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">ctx</span><span class="z-punctuation z-section z-parens z-end z-go">)</span> <span class="z-punctuation z-section z-braces z-end z-go">}</span></span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-keyword z-control z-go">if</span> <span class="z-variable z-declaration z-go">err</span> <span class="z-keyword z-operator z-assignment z-go">:=</span> <span class="z-variable z-other z-go">g</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Wait</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-terminator z-go">;</span> <span class="z-variable z-other z-go">err</span> <span class="z-keyword z-operator z-go">!=</span> <span class="z-constant z-language z-go">nil</span> <span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-begin z-go">{</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-variable z-other z-go">http</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Error</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-variable z-other z-go">w</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-variable z-other z-go">err</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">Error</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-punctuation z-section z-parens z-end z-go">)</span><span class="z-punctuation z-separator z-go">,</span> <span class="z-constant z-numeric z-integer z-decimal z-go">500</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">        <span class="z-keyword z-control z-go">return</span>
</span></span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-meta z-block z-go">    <span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go">    <span class="z-variable z-other z-go">w</span><span class="z-punctuation z-accessor z-dot z-go">.</span><span class="z-variable z-function z-go">WriteHeader</span><span class="z-punctuation z-section z-parens z-begin z-go">(</span><span class="z-constant z-numeric z-integer z-decimal z-go">200</span><span class="z-punctuation z-section z-parens z-end z-go">)</span>
</span></span><span class="z-source z-go"><span class="z-meta z-block z-go"><span class="z-punctuation z-section z-braces z-end z-go">}</span></span>
</span></code></pre>
<h6 id="elixir-concurrent-calls-with-timeout-supervised-isolation">Elixir: concurrent calls with timeout + supervised isolation<a class="zola-anchor" href="#elixir-concurrent-calls-with-timeout-supervised-isolation" aria-label="Anchor link for: elixir-concurrent-calls-with-timeout-supervised-isolation" style="visibility: hidden;"></a>
</h6>
<pre data-lang="elixir" class="language-elixir z-code"><code class="language-elixir" data-lang="elixir"><span class="z-source z-elixir"><span class="z-meta z-function z-elixir"><span class="z-keyword z-control z-module z-elixir">def</span> <span class="z-entity z-name z-function z-public z-elixir">handle_call</span><span class="z-punctuation z-definition z-parameters z-elixir">(</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>fetch</span><span class="z-punctuation z-separator z-object z-elixir">,</span> _from<span class="z-punctuation z-separator z-object z-elixir">,</span> state<span class="z-punctuation z-section z-function z-elixir">)</span> <span class="z-keyword z-control z-module z-elixir">do</span></span>
</span><span class="z-source z-elixir">  results <span class="z-keyword z-operator z-assignment z-elixir">=</span>
</span><span class="z-source z-elixir">    <span class="z-punctuation z-section z-array z-elixir">[</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>a</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>b</span><span class="z-punctuation z-section z-array z-elixir">]</span>
</span><span class="z-source z-elixir">    <span class="z-keyword z-operator z-pipe z-elixir">|&gt;</span> <span class="z-entity z-name z-class z-elixir">Task</span><span class="z-punctuation z-separator z-method z-elixir">.</span>async_stream<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-variable z-other z-capture z-elixir"><span class="z-keyword z-operator z-capture z-elixir">&amp;</span>call_service</span><span class="z-keyword z-operator z-arithmetic z-elixir">/</span><span class="z-constant z-numeric z-elixir">1</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-keywords z-elixir">timeout<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-numeric z-elixir">2_000</span><span class="z-punctuation z-separator z-object z-elixir">,</span> <span class="z-constant z-other z-keywords z-elixir">on_timeout<span class="z-punctuation z-definition z-constant z-elixir">:</span></span> <span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>kill_task</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">    <span class="z-keyword z-operator z-pipe z-elixir">|&gt;</span> <span class="z-entity z-name z-class z-elixir">Enum</span><span class="z-punctuation z-separator z-method z-elixir">.</span>to_list<span class="z-punctuation z-section z-function z-elixir">(</span><span class="z-punctuation z-section z-function z-elixir">)</span>
</span><span class="z-source z-elixir">
</span><span class="z-source z-elixir">  <span class="z-meta z-sequence z-tuple z-elixir"><span class="z-punctuation z-section z-sequence z-begin z-elixir">{</span><span class="z-constant z-other z-symbol z-elixir"><span class="z-punctuation z-definition z-constant z-elixir">:</span>reply</span><span class="z-punctuation z-separator z-sequence z-elixir">,</span> results<span class="z-punctuation z-separator z-sequence z-elixir">,</span> state<span class="z-punctuation z-section z-sequence z-end z-elixir">}</span></span>
</span><span class="z-source z-elixir"><span class="z-keyword z-control z-elixir">end</span>
</span></code></pre>
<h6 id="go-cheatsheet">Go Cheatsheet<a class="zola-anchor" href="#go-cheatsheet" aria-label="Anchor link for: go-cheatsheet" style="visibility: hidden;"></a>
</h6>
<object data="/go-cs.pdf" type="application/pdf" style="width:100%; height:100vh;">
  <p>
    Your browser can’t display PDFs inline.
    <a href="/go-cs.pdf">Open the PDF</a>
  </p>
</object>

      </article>

      
      

      
      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      ∅ 2026 n0um3n4
      
    </div>
  </div>

  <div class="right">
    
    
      
    
    
    <a id="rss-btn" href="https://idunnowhatiamdoing.engineering/posts/feed.xml">RSS</a>
    
    

    
  </div>
</footer>




<dialog id="rss-mask">
  <div>
    <a href="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml">https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml</a>
    
    
    <button autofocus aria-label="copy" data-link="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>

    </button>
  </div>
</dialog>



  </main>
</div>

  
<script src="/js/lightense.min.js"></script>


  <script src="https://idunnowhatiamdoing.engineering/js/main.js"></script>
</body>

</html>
