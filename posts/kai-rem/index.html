<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="Software engineering à la Mexicana">

  <title>kai-rem</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://idunnowhatiamdoing.engineering/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://idunnowhatiamdoing.engineering/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://idunnowhatiamdoing.engineering/img/apple-touch-icon.png">
  
  <style>
  @import url("https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap");

  :root {
    --bg-top: #ffffff;
    --bg-bottom: #ffffff;
    --ink: #141414;
    --muted: #6a6358;
    --link: #1d4f8c;
    --max: 81ch;
    --pad: clamp(1rem, 3vw, 2.5rem);
  }

  * {
    box-sizing: border-box;
  }

  html {
    font-size: 100%;
  }

  body {
    margin: 0;
    min-height: 100%;
    padding: var(--pad);
    background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
    color: var(--ink);
    font-family: "Share Tech Mono", monospace;
    font-size: 16px;
    line-height: 1.5;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  main.txt {
    max-width: var(--max);
    margin: 0 auto;
  }

  pre {
    font-family: "Share Tech Mono", monospace;
  }
  pre.txt-block {
    margin: 0;
    white-space: pre;
    overflow-x: auto;
  }

  a {
    color: inherit;
    text-decoration: underline;
    text-decoration-style: dotted;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
  }

  a:visited {
    color: inherit;
  }

  a:where(:hover, :focus) {
    color: var(--link);
  }

  ::selection {
    background: rgba(29, 79, 140, 0.18);
  }
  p {
    margin: 0;
    line-height: 16pt;
  }
  ul,
  ol {
    margin: 0;
    line-height: 10pt;
  }
  li {
    line-height: 16pt;
  }
  blockquote {
    margin: 0 16pt;
    line-height: 16pt;
  }
  img {
    max-width: 64ch;
  }
  @media (prefers-reduced-motion: no-preference) {
    main.txt {
      animation: fade-in 600ms ease-out both;
    }

    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }

  @media (max-width: 700px) {
    body {
      font-size: 15px;
      padding: 1rem;
    }
    pre.txt-block {
      white-space: pre-wrap;
    }
    pre code {
      text-wrap: auto;
    }
  }
</style>

  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  
<main class="txt">
  <pre class="txt-block">

<a id="back-link" href="/">← back</a>

<b>kai-rem</b>
<span id="publish">Jan 12, 2026</span>

<p><img src="/img/kai-rem.png" alt="kai-rem" /></p>
<p>Lately I have been working on <code>kai-rem</code>, a realtime synth engine with a
minimalist UI. The goal this week: add more sound engines, bolt on
per-channel FX, and keep the interface simple enough to play without a manual.</p>
<p>Below is a quick, casual tour of what I changed, what worked, and a few gotchas
I tripped over.</p>
<p><strong>The short version</strong></p>
<ul>
<li>Added four engines: Supersaw, Ring Mod, Pluck (Karplus), Formant.</li>
<li>Added per-channel FX modules: Drive, Delay, Chorus, Crush.</li>
<li>Kept the UI compact: each channel gets a dropdown + amount slider.</li>
<li>Routed keyboard input to the selected channel for easy auditioning.</li>
</ul>
<p>The original synth had the basics (subtractive, wavetable, FM, pulse, noise).
Great for testing, but I wanted more contrast:</p>
<ul>
<li><strong>Supersaw</strong> for that classic wide, buzzy pad.</li>
<li><strong>Ring Mod</strong> for metallic and alien textures.</li>
<li><strong>Pluck/Karplus</strong> for instant “stringy” sounds.</li>
<li><strong>Formant</strong> to get vowel-ish timbres without a full filter bank.</li>
</ul>
<p>The nice part about these is that they share a lot of code. Once the oscillator
and filter plumbing is in place, new engines are mostly different signal paths.</p>
<p><strong>Per-channel FX</strong></p>
<p>I went with a single FX slot per channel:</p>
<ul>
<li><strong>None</strong></li>
<li><strong>Drive</strong> (tanh saturation)</li>
<li><strong>Delay</strong> (simple feedback delay)</li>
<li><strong>Chorus</strong> (modulated delay line)</li>
<li><strong>Crush</strong> (bit + sample rate reduction)</li>
</ul>
<p><strong>UI tweaks: small but important</strong></p>
<p>The channel rack now shows:</p>
<ul>
<li>Track select, mute, solo</li>
<li>Pan slider</li>
<li>FX dropdown</li>
<li>FX amount slider</li>
</ul>
<p>I nudged the left column width to make room. The big UX improvement was simple:
<strong>keyboard notes now go to the selected channel</strong>, not just channel 1. That makes
testing per-channel FX feel immediate.</p>
<p><strong>Implementation notes</strong></p>
<p>A few things worth mentioning:</p>
<ul>
<li><strong>Audio thread is sacred.</strong> All UI updates go through a ring buffer to avoid
blocking.</li>
<li><strong>FX are in the mixer, not in the voice.</strong> This keeps engines clean and lets
FX act on the mixed channel signal.</li>
<li><strong>Formant uses bandpass filters.</strong> I added a bandpass output to the SVF for
this.</li>
<li><strong>Karplus gets a tiny delay buffer per voice.</strong> Cheap, cheerful, and good
enough for the vibe.</li>
</ul>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>release</span><span class="z-keyword z-operator z-end-of-options z-shell"> --</span></span><span class="z-meta z-function-call z-arguments z-shell"> --poly 8 --mode supersaw --midi virtual</span>
</span></code></pre>
<p>And yes, you can play notes with the keyboard when you do not have MIDI.</p>

  </pre>
</main>

  
<script src="/js/lightense.min.js"></script>

  <script src="https://idunnowhatiamdoing.engineering/js/main.js"></script>
</body>

</html>
