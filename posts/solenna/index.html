<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="Software engineering à la Mexicana">

  <title>solënna</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://idunnowhatiamdoing.engineering/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://idunnowhatiamdoing.engineering/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://idunnowhatiamdoing.engineering/img/apple-touch-icon.png">
  
  <style>
  @import url("https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap");

  /* light mode colors */
  body {
    --primary-color: #5871a2;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #ffffff;
    --text-color: #2f3030;
    --text-pale-color: #767676;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    --primary-color: #6f8fd1;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    --bg-color: #1c1c1c;
    --text-color: #c1c1c1;
    --text-pale-color: #848484;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    --main-font: "Share Tech Mono", monospace;
    --code-font: "Share Tech Mono", monospace;
    --homepage-max-width: 81ch;
    --main-max-width: 81ch;
    --avatar-size: 60px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 0px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }
</style>

  <link rel="stylesheet" href="https://idunnowhatiamdoing.engineering/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  
<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#solenna-building-a-compact-libp2p-node-for-geotagged-data">solënna: building a compact libp2p node for geotagged data</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#problem-framing">Problem framing</a>
            </li>
            
            <li>
              <a class="h3" href="#architecture-overview">Architecture overview</a>
            </li>
            
            <li>
              <a class="h3" href="#data-model-signed-objects-with-location-metadata">Data model: signed objects with location metadata</a>
            </li>
            
            <li>
              <a class="h3" href="#storage-and-queries-why-geohash-indexing-works-well-here">Storage and queries: why geohash indexing works well here</a>
            </li>
            
            <li>
              <a class="h3" href="#anti-spam-pow-rate-limits-instead-of-trust">Anti-spam: PoW + rate limits instead of trust</a>
            </li>
            
            <li>
              <a class="h3" href="#ui-in-the-same-process-dioxus-liveview">UI in the same process: Dioxus LiveView</a>
            </li>
            
            <li>
              <a class="h3" href="#real-world-networking-relay-support">Real-world networking: relay support</a>
            </li>
            
            <li>
              <a class="h3" href="#operational-shape">Operational shape</a>
            </li>
            
            <li>
              <a class="h3" href="#what-i-would-explore-next">What I would explore next</a>
            </li>
            
            <li>
              <a class="h3" href="#closing-thoughts">Closing thoughts</a>
            </li>
            
          </ul>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    
<header>
  <nav>
    <a id="back-link" href="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts">← back</a>
  </nav>
</header>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
"></div>
      
      <article class="prose">
        <h1>solënna</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Jan 14, 2026</span>
            </div>

          
        </div>

        
        

        

        <p><img src="/img/sol%C3%ABnna.png" alt="solënna" /></p>
<h1 id="solenna-building-a-compact-libp2p-node-for-geotagged-data">solënna: building a compact libp2p node for geotagged data<a class="zola-anchor" href="#solenna-building-a-compact-libp2p-node-for-geotagged-data" aria-label="Anchor link for: solenna-building-a-compact-libp2p-node-for-geotagged-data" style="visibility: hidden;"></a>
</h1>
<p>Here is a quick tour of the engineering choices behind solënna, a small libp2p node that publishes and browses signed, geotagged datapoints. My goals were simple: keep the stack small, ship a usable UI fast, and still survive on a public network without turning into a spam magnet.</p>
<h2 id="problem-framing">Problem framing<a class="zola-anchor" href="#problem-framing" aria-label="Anchor link for: problem-framing" style="visibility: hidden;"></a>
</h2>
<p>Location-based systems tend to be either centralized and easy, or decentralized and hard to operate. I wanted a node that felt like a single binary you can run on a laptop, but that still federates into a public P2P network without needing a dedicated ops stack. That led me to a few constraints:</p>
<ul>
<li>Storage needed to be local and simple.</li>
<li>The UI had to ship with the node.</li>
<li>The protocol had to verify authorship without central authority.</li>
<li>The network had to defend itself from trivial write abuse.</li>
</ul>
<h2 id="architecture-overview">Architecture overview<a class="zola-anchor" href="#architecture-overview" aria-label="Anchor link for: architecture-overview" style="visibility: hidden;"></a>
</h2>
<p>At a high level, the node is a libp2p swarm loop plus a local SQLite store and an HTTP server. The <a rel="nofollow noreferrer" href="https://app.radicle.xyz/nodes/seed.radicle.garden/rad:zhzsX3bknxQhN6wbTY2QoxPhGbzp">repo</a> mirrors that split:</p>
<ul>
<li><code>src/main.rs</code> is the swarm loop and CLI wiring.</li>
<li><code>src/protocol.rs</code> defines the signed object format and request/response types.</li>
<li><code>src/store.rs</code> implements persistence and geohash indexing.</li>
<li><code>src/http.rs</code> hosts both the LiveView UI and a JSON API.</li>
</ul>
<p>Keeping it this way means one process, one data directory, and a much simpler mental model when you are debugging or deploying.</p>
<h2 id="data-model-signed-objects-with-location-metadata">Data model: signed objects with location metadata<a class="zola-anchor" href="#data-model-signed-objects-with-location-metadata" aria-label="Anchor link for: data-model-signed-objects-with-location-metadata" style="visibility: hidden;"></a>
</h2>
<p>I went with content-addressed objects that are signed by an author keypair. That gives me a few nice properties:</p>
<ul>
<li>IDs are derived from content, so the same object is globally stable.</li>
<li>Signatures are verified at ingest, so provenance is embedded in the data itself.</li>
<li>Objects can be replicated without a centralized database.</li>
</ul>
<p>For the UI and API, the core field is location. A point maps to a geohash cell, which is a compact way to partition the earth into hierarchical grid buckets.</p>
<h2 id="storage-and-queries-why-geohash-indexing-works-well-here">Storage and queries: why geohash indexing works well here<a class="zola-anchor" href="#storage-and-queries-why-geohash-indexing-works-well-here" aria-label="Anchor link for: storage-and-queries-why-geohash-indexing-works-well-here" style="visibility: hidden;"></a>
</h2>
<p>The hot path is <strong>what objects are in this viewport</strong>. I did not want to pull in a heavy spatial index or do full-table scans with bounding boxes. Instead, the store indexes by geohash cell. The query becomes “enumerate the geohash cells that cover this viewport, then fetch objects per cell.”</p>
<p>It is a practical tradeoff:</p>
<ul>
<li>Geohash prefix lookups are cheap in SQLite.</li>
<li>The index is stable and deterministic across nodes.</li>
<li>It keeps the API simple (<code>GET /geocell</code>, <code>GET /viewport</code>).</li>
</ul>
<p>It is not as precise as a proper spatial index, but it is more than enough for fast, map-like browsing.</p>
<h2 id="anti-spam-pow-rate-limits-instead-of-trust">Anti-spam: PoW + rate limits instead of trust<a class="zola-anchor" href="#anti-spam-pow-rate-limits-instead-of-trust" aria-label="Anchor link for: anti-spam-pow-rate-limits-instead-of-trust" style="visibility: hidden;"></a>
</h2>
<p>Public P2P networks need backpressure. I did not want to build a full trust system, I just wanted to make abuse expensive. solënna uses a few levers in <code>src/anti_spam.rs</code>:</p>
<ul>
<li>Proof-of-work gating for write requests.</li>
<li>Rate limits to dampen bursts.</li>
<li>Optional allowlist for closed networks.</li>
</ul>
<p>This is intentionally lightweight: it does not try to solve trust, only to make abuse expensive enough that it is not the default behavior.</p>
<h2 id="ui-in-the-same-process-dioxus-liveview">UI in the same process: Dioxus LiveView<a class="zola-anchor" href="#ui-in-the-same-process-dioxus-liveview" aria-label="Anchor link for: ui-in-the-same-process-dioxus-liveview" style="visibility: hidden;"></a>
</h2>
<p>The HTTP server embeds a Dioxus LiveView UI. I wanted the node to be useful immediately after <code>cargo run</code> without a separate frontend build or extra processes. That gives you:</p>
<ul>
<li>One binary that serves both UI and JSON API.</li>
<li>Fewer deployment knobs and fewer moving parts.</li>
<li>A quick feedback loop for experimenting with protocol changes.</li>
</ul>
<p>For engineering velocity, this mattered more than having a fully decoupled frontend.</p>
<h2 id="real-world-networking-relay-support">Real-world networking: relay support<a class="zola-anchor" href="#real-world-networking-relay-support" aria-label="Anchor link for: real-world-networking-relay-support" style="visibility: hidden;"></a>
</h2>
<p>Most peers sit behind NAT, so Solenna ships a circuit-relay v2 binary (<code>src/bin/solenna-relay.rs</code>) and a relay manager (<code>src/relay_mgr.rs</code>). This solves the practical <strong>I cannot accept inbound TCP</strong> problem without needing to punch a dozen firewall holes. It also lets you run a public relay if you want to improve connectivity for the network.</p>
<h2 id="operational-shape">Operational shape<a class="zola-anchor" href="#operational-shape" aria-label="Anchor link for: operational-shape" style="visibility: hidden;"></a>
</h2>
<p>The project is designed to deploy simply:</p>
<ul>
<li>Docker and Docker Compose for fast local runs.</li>
<li>systemd units for traditional hosts.</li>
<li>Fly.io config for quick cloud launches.</li>
</ul>
<p>The node's surface area is small: a libp2p TCP port and an HTTP port.</p>
<h2 id="what-i-would-explore-next">What I would explore next<a class="zola-anchor" href="#what-i-would-explore-next" aria-label="Anchor link for: what-i-would-explore-next" style="visibility: hidden;"></a>
</h2>
<p>A few ideas are on the roadmap:</p>
<ul>
<li>Better edit conflict resolution for high-latency networks.</li>
<li>Richer queries (tags, author trust, time windows).</li>
<li>More granular spam controls for mixed public/private clusters.</li>
</ul>
<h2 id="closing-thoughts">Closing thoughts<a class="zola-anchor" href="#closing-thoughts" aria-label="Anchor link for: closing-thoughts" style="visibility: hidden;"></a>
</h2>
<p>solënna is intentionally small (i dislike complexity as a justification for whatever). The goal was to prove out a minimal, usable P2P node that handles real network constraints and still feels like a developer-friendly tool. If you want to explore further, start in <code>src/store.rs</code> or <code>src/http.rs</code> and keep the loop tight: change a thing, run the node, open the UI, repeat.</p>
<p>For a quick run command and endpoint list, the README has the minimal setup.</p>

      </article>

      
      

      
      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      ∅ 2026 n0um3n4
      
    </div>
  </div>

  <div class="right">
    
    
      
    
    
    <a id="rss-btn" href="https://idunnowhatiamdoing.engineering/posts/feed.xml">RSS</a>
    
    

    
  </div>
</footer>




<dialog id="rss-mask">
  <div>
    <a href="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml">https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml</a>
    
    
    <button autofocus aria-label="copy" data-link="https:&#x2F;&#x2F;idunnowhatiamdoing.engineering&#x2F;posts&#x2F;feed.xml" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z" fill="currentColor"></path></svg>

    </button>
  </div>
</dialog>



  </main>
</div>

  
<script src="/js/lightense.min.js"></script>


  <script src="https://idunnowhatiamdoing.engineering/js/main.js"></script>
</body>

</html>
