<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  
  
    
  
  <meta name="description" content="Software engineering à la Mexicana">

  <title>steer</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://idunnowhatiamdoing.engineering/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://idunnowhatiamdoing.engineering/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://idunnowhatiamdoing.engineering/img/apple-touch-icon.png">
  
  <style>
  @import url("https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap");

  :root {
    --bg-top: #ffffff;
    --bg-bottom: #ffffff;
    --ink: #141414;
    --muted: #6a6358;
    --link: #1d4f8c;
    --max: 88ch;
    --pad: clamp(1rem, 3vw, 2.5rem);
  }

  * {
    box-sizing: border-box;
  }

  html {
    font-size: 100%;
  }

  body {
    margin: 0;
    min-height: 100%;
    padding: var(--pad);
    background: linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
    color: var(--ink);
    font-family: "Share Tech Mono", monospace;
    font-size: 16px;
    line-height: 1.5;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  main.txt {
    max-width: var(--max);
    margin: 0 auto;
  }

  pre {
    font-family: "Share Tech Mono", monospace;
  }
  pre.txt-block {
    margin: 0;
    white-space: pre;
    overflow-x: auto;
  }

  a {
    color: inherit;
    text-decoration: underline;
    text-decoration-style: dotted;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
  }

  a:visited {
    color: inherit;
  }

  a:where(:hover, :focus) {
    color: var(--link);
  }

  ::selection {
    background: rgba(29, 79, 140, 0.18);
  }
  p {
    margin: 0;
    line-height: 16pt;
  }
  ul,
  ol {
    margin: 0;
    line-height: 10pt;
  }
  li {
    line-height: 16pt;
  }
  blockquote {
    margin: 0 16pt;
    line-height: 16pt;
  }
  img {
    max-width: 64ch;
  }
  @media (prefers-reduced-motion: no-preference) {
    main.txt {
      animation: fade-in 600ms ease-out both;
    }

    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }

  @media (max-width: 700px) {
    body {
      font-size: 15px;
      padding: 1rem;
    }
  }
</style>

  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">
  
  
<main class="txt">
  <pre class="txt-block">

<a id="back-link" href="/">← back</a>

<b>steer</b>
<span id="publish">Jan 18, 2026</span>

<p><a rel="nofollow noreferrer" href="https://app.radicle.xyz/nodes/seed.radicle.garden/rad:z4WueZLqUwwjNxZDd3jQTa7XoNmNL">Steer</a> is a small but opinionated experiment in local‑first collaboration.
It pairs a Dioxus LiveView front end with a libp2p-powered backend so you can
ideate even when Wi‑Fi is flaky, then sync when peers appear. This post walks
through how it works, how to run it, and what to demo.</p>
<p><strong>What Steer Does</strong></p>
<ul>
<li>Local-first: you can read/write ideas and comments without a server
round-trip; networking is additive, not required.</li>
<li>P2P sync: libp2p gossips events (ideas, votes, moderation actions)
between peers.</li>
<li>Moderation: capabilities, rate limits, and proof checks gate inbound
events.</li>
<li>Offline shell: a minimal service worker caches the app shell and
assets (<code>/offline.html</code> keeps the UI available).</li>
</ul>
<p><strong>Architecture Snapshot</strong></p>
<ul>
<li>Rust + Axum host a Dioxus LiveView app at <code>/</code> and a WebSocket endpoint
at <code>/ws</code>.</li>
<li>The derived application state is rebuilt from an append-only event log
(<code>steer-core</code> + <code>steer-net</code>).</li>
<li>Static assets live under <code>crates/steer-app/static</code> (<code>ë.css</code>, <code>ë.ui.js</code>,
icons, offline page) and are served directly by the Axum router.</li>
<li>The service worker pre-caches the shell and icons; it stores fetched
requests into a simple cache (<code>steer-cache-v2</code>).</li>
</ul>
<p><strong>Running It Locally</strong></p>
<p>Prereqs: Rust (stable), Git. No external DB or brokers required.</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> clone https://github.com/your-org/steer.git</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-cd z-shell">cd</span></span><span class="z-meta z-function-call z-arguments z-shell"> steer</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>package</span> steer<span class="z-keyword z-operator z-end-of-options z-shell"> --</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">  --http 127.0.0.1:8080 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">  --store memory</span>
</span></code></pre>
<p>Then open <code>http://127.0.0.1:8080/</code> in your browser. The UI loads <code>ë.css</code>
for styling and connects to <code>/ws</code> for live updates.</p>
<p><strong>File-backed store</strong></p>
<p>Persist the log to disk and reuse it across restarts:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>package</span> steer<span class="z-keyword z-operator z-end-of-options z-shell"> --</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">  --store file <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-arguments z-shell">  --store-path ./data/steer.log</span>
</span></code></pre>
<p><strong>P2P toggles</strong></p>
<ul>
<li><code>--no-p2p</code>: run in fully local mode.</li>
<li><code>--listen /ip4/0.0.0.0/tcp/0</code>: add more listen addresses.</li>
<li><code>--dial /ip4/…/tcp/…/p2p/&lt;peerid&gt;</code>: connect to a remote peer.</li>
<li><code>--wan-profile</code>: enable relay + AutoNAT, disable mDNS for WAN-friendly
operation.</li>
</ul>
<p><strong>Moderation knobs</strong></p>
<ul>
<li><code>--require-pow-bits 8</code>: inbound envelopes must prove PoW with 8 leading
zero bits.</li>
<li><code>--attach-pow-bits 8</code>: attach PoW to outbound envelopes.</li>
<li><code>--allow-invite &lt;token&gt;</code> / <code>--invite-token &lt;token&gt;</code>: require and attach
invite tokens.</li>
<li><code>--cap-subject &lt;pubkey&gt;</code>: embed your capability subject in moderation events.</li>
</ul>
<p><strong>Demo Script</strong></p>
<ol>
<li><strong>Create ideas</strong>: Propose a few ideas; note the single-line inputs and dotted
containers. Show offline shell still working if you flip Chrome to offline
(cached by SW).</li>
<li><strong>Voting + comments</strong>: Open comments, add replies, collapse threads. Observe
live updates across two browser tabs (they share the same WebSocket and state).</li>
<li><strong>Moderation actions</strong>: Hide an event by ID, label it, then toggle "strict mode"
to hide unapproved content. Grant/Revoke capabilities to a subject and see labels
appear.</li>
<li><strong>Checkpoint/export</strong>: Click “Checkpoint now” to publish a checkpoint event,
then download <code>/export</code> and re-import it to show idempotent ingestion.</li>
<li><strong>P2P peek</strong> (optional with two nodes): Run a second instance with <code>--dial</code> to
the first; add ideas on one node and watch them appear on the other.</li>
</ol>
<p><strong>Notable Files</strong></p>
<ul>
<li><code>crates/steer-app/src/main.rs</code>: Axum router, service worker payload, static
asset routes.</li>
<li><code>crates/steer-app/src/ui.rs</code>: Dioxus LiveView UI; references <code>ë.css</code> for the
shell and keeps small bridge styles for app-specific classes.</li>
<li><code>crates/steer-app/static/ë.css</code>: Design system (sharp, minimal, grid-aligned).</li>
<li><code>crates/steer-app/static/ë.ui.js</code>: Minimal JS behaviors (modals, toasts,
cmdk, validation, pagination).</li>
<li><code>crates/steer-core</code>, <code>crates/steer-net</code>: Event model and networking.</li>
</ul>
<p><strong>Operational Notes</strong></p>
<ul>
<li>Service worker cache name is <code>steer-cache-v2</code>; bump it when adding static
assets so clients refresh.</li>
<li>The UI is LiveView-driven; no SPA bundle build step is required.</li>
<li>If you ship binaries, include the <code>static/</code> assets alongside for the routes
to serve them.</li>
</ul>
<p><strong>Closing Thoughts</strong>
Steer’s focus is ergonomics under bad networks: the UI stays responsive with or
without peers, and synchronization is a best-effort background concern. The
combination of Dioxus LiveView and libp2p keeps the stack lean while still
giving you real-time collaboration and offline resilience.</p>

  </pre>
</main>

  
<script src="/js/lightense.min.js"></script>

  <script src="https://idunnowhatiamdoing.engineering/js/main.js"></script>
</body>

</html>
